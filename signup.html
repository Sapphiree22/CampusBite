<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>CampusBite | Sign Up</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "Inter", sans-serif; }
        body { background: #fff6ef; display: flex; justify-content: center; align-items: center; min-height: 100vh; padding: 20px; padding-top: 90px; }

        /* HEADER STYLES */
        .top-navbar {
            position: fixed; top: 0; left: 0; width: 100%; height: 70px; background: white;
            display: flex; align-items: center; padding: 0 24px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05); z-index: 1000;
        }
        .nav-back {
            display: flex; align-items: center; gap: 8px; text-decoration: none;
            color: #4b5563; font-weight: 500; font-size: 15px; transition: color 0.2s; z-index: 2;
        }
        .nav-back:hover { color: #ff5b00; }
        
        /* LOGO STYLES */
        .nav-logo-container {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
            gap: 10px;
            z-index: 1; 
        }

        .nav-logo-img {
            height: 35px;
            width: auto;
            object-fit: contain;
        }

        .logo-text { font-size: 19px; font-weight: 700; color: #1f2937; }
        .logo-text span { color: #ff5b00; }

        /* FORM STYLES */
        .signup-container {
            background: white; width: 100%; max-width: 420px; padding: 35px;
            border-radius: 14px; box-shadow: 0px 8px 20px rgba(0,0,0,0.1); text-align: center;
        }
        h2 { font-size: 26px; font-weight: 700; color: #1f2937; }
        .subtitle { margin-top: 8px; color: #6b7280; font-size: 14px; margin-bottom: 25px; }
        .input-box { text-align: left; margin-bottom: 15px; }
        label { font-size: 14px; font-weight: 500; color: #374151; }
        .input-field, select {
            width: 100%; padding: 12px; border: 1.5px solid #ddd; border-radius: 8px;
            margin-top: 6px; font-size: 14px; background-color: #fff;
        }
        .input-field:focus, select:focus { border-color: #ff5b00; outline: none; }
        .input-error { border-color: #ef4444 !important; background-color: #fef2f2; }
        .signup-btn {
            width: 100%; background: #ff5b00; color: white; padding: 12px 0; border: none;
            border-radius: 8px; font-size: 15px; margin-top: 10px; cursor: pointer;
            display: flex; justify-content: center; align-items: center; font-weight: 600; gap: 6px;
        }
        .signup-btn:hover { background: #e04f00; }
        .login-text { margin-top: 18px; font-size: 14px; color: #6b7280; }
        .login-text a { color: #ff5b00; text-decoration: none; font-weight: 600; }

        /* --- TOAST NOTIFICATION STYLES --- */
        #toast-box {
            position: fixed; top: 30px; left: 50%; transform: translateX(-50%);
            z-index: 9999; display: flex; flex-direction: column; gap: 10px;
        }
        .toast {
            min-width: 300px; background: white; padding: 12px 20px; border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15); display: flex; align-items: center; gap: 10px;
            font-size: 14px; font-weight: 500; animation: slideIn 0.3s ease-out;
            border-left: 4px solid #333;
        }
        .toast.success { border-left-color: #10b981; color: #065f46; }
        .toast.error { border-left-color: #ef4444; color: #7f1d1d; }
        
        @keyframes slideIn {
            from { transform: translateY(-20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>
<body>

    <div id="toast-box"></div>

    <header class="top-navbar">
        <a href="index.html" class="nav-back"><i data-lucide="arrow-left"></i> Back</a>
        
        <div class="nav-logo-container">
            <img src="images/CampusBiteLogo.png" alt="CampusBite Logo" class="nav-logo-img">
            <div class="logo-text">Campus<span>Bite</span></div>
        </div>
    </header>

    <div class="signup-container">
        <h2>Create Account</h2>
        <p class="subtitle">Sign up to start ordering</p>

        <form id="signupForm" onsubmit="handleSignup(event)">
            <div class="input-box">
                <label>Full Name</label>
                <input type="text" id="fullName" class="input-field" placeholder="Full Name">
            </div>

            <div class="input-box">
                <label>Student Number</label>
                <input type="text" id="studentNum" class="input-field" placeholder="e.g., 2023-12345">
            </div>

            <div class="input-box">
                <label>Email Address</label>
                <input type="email" id="email" class="input-field" placeholder="name@student.school.edu">
            </div>

            <div class="input-box">
                <label>Course</label>
                <select id="course" class="input-field">
                    <option value="">Select your course</option>
                    <option>BSIT</option>
                    <option>BECEd</option>
                    <option>BSBA</option>
                    <option>BSA</option>
                    <option>BSHM</option>
                </select>
            </div>

            <div class="input-box">
                <label>Create 4-digit PIN</label>
                <input type="password" id="pin" maxlength="4" class="input-field" placeholder="••••"
                       oninput="this.value = this.value.replace(/[^0-9]/g, '')">
            </div>

            <div class="input-box">
                <label>Confirm PIN</label>
                <input type="password" id="confirmPin" maxlength="4" class="input-field" placeholder="••••"
                       oninput="this.value = this.value.replace(/[^0-9]/g, '')">
            </div>

            <button type="submit" class="signup-btn"><i data-lucide="user-plus"></i> Create Account</button>
        </form>

        <p class="login-text">Already have an account? <a href="login.html">Log In</a></p>
    </div>

    <script>
        lucide.createIcons();

        // --- TOAST NOTIFICATION FUNCTION ---
        function showToast(message, type = 'info') {
            const box = document.getElementById('toast-box');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            let iconName = 'info';
            if (type === 'success') iconName = 'check-circle';
            if (type === 'error') iconName = 'alert-circle';

            toast.innerHTML = `<i data-lucide="${iconName}" style="width:18px;"></i> <span>${message}</span>`;
            
            box.appendChild(toast);
            lucide.createIcons(); // Initialize the new icon

            // Remove after 3.5 seconds
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 3500);
        }

        function handleSignup(event) {
            event.preventDefault();
            const fullName = document.getElementById('fullName');
            const studentNum = document.getElementById('studentNum');
            const email = document.getElementById('email');
            const course = document.getElementById('course');
            const pin = document.getElementById('pin');
            const confirmPin = document.getElementById('confirmPin');

            // Reset errors
            [fullName, studentNum, email, course, pin, confirmPin].forEach(i => i.classList.remove('input-error'));

            let isValid = true;
            let errorMessage = "";

            if (!fullName.value.trim()) { fullName.classList.add('input-error'); isValid = false; }
            if (!studentNum.value.trim()) { studentNum.classList.add('input-error'); isValid = false; }
            if (!email.value.trim() || !email.value.includes('@')) { email.classList.add('input-error'); isValid = false; }
            if (!course.value) { course.classList.add('input-error'); isValid = false; }

            if (pin.value.length !== 4) {
                pin.classList.add('input-error'); errorMessage = "PIN must be 4 digits."; isValid = false;
            } else if (pin.value !== confirmPin.value) {
                confirmPin.classList.add('input-error'); errorMessage = "PINs do not match."; isValid = false;
            }

            if (isValid) {
                // Show success toast instead of alert
                showToast("Account created successfully! Redirecting...", "success");
                
                // Wait 1.5 seconds so user can see the message, then redirect
                setTimeout(() => {
                    window.location.href = "login.html";
                }, 1500);
                
            } else {
                // Show error toast
                showToast(errorMessage || "Please fill in all fields correctly.", "error");
            }
        }
    </script>
</body>
</html>